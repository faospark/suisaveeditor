const CACHE_NAME="suikohd-editor-v1.2.0",urlsToCache=["./","./index.html","./css/pico.css","./src/style.css","./src/main.js","./src/gamedata.js","./public/favicon.svg","./debug/save.json"];self.addEventListener("install",(event=>{console.log("[Service Worker] Installing..."),event.waitUntil(caches.open(CACHE_NAME).then((cache=>{console.log("[Service Worker] Caching app shell");const cacheRequired=Promise.all(["./","./index.html","./css/pico.css","./src/style.css","./src/main.js","./src/gamedata.js","./public/favicon.svg"].map((url=>cache.add(url).catch((err=>{throw console.error("[Service Worker] Failed to cache required file:",url,err),err}))))),cacheOptional=Promise.all(["./debug/save.json"].map((url=>cache.add(url).catch((err=>{console.log("[Service Worker] Optional file not cached:",url)})))));return Promise.all([cacheRequired,cacheOptional])})).then((()=>(console.log("[Service Worker] Installed successfully"),self.skipWaiting()))))})),self.addEventListener("activate",(event=>{console.log("[Service Worker] Activating..."),event.waitUntil(caches.keys().then((cacheNames=>Promise.all(cacheNames.map((cacheName=>{if(cacheName!==CACHE_NAME)return console.log("[Service Worker] Deleting old cache:",cacheName),caches.delete(cacheName)}))))).then((()=>(console.log("[Service Worker] Activated successfully"),self.clients.claim()))))})),self.addEventListener("fetch",(event=>{event.respondWith(caches.match(event.request).then((response=>{if(response)return console.log("[Service Worker] Serving from cache:",event.request.url),response;const fetchRequest=event.request.clone();return fetch(fetchRequest).then((response=>{if(!response||200!==response.status||"basic"!==response.type)return response;const responseToCache=response.clone();return caches.open(CACHE_NAME).then((cache=>{cache.put(event.request,responseToCache)})),response})).catch((()=>{console.log("[Service Worker] Network request failed for:",event.request.url)}))})))}));