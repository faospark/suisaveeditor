const APP_VERSION="1.2.0";let DEBUG_MODE="true"===localStorage.getItem("debugMode");const DEBUG_FILE_PATH="./debug/save.json",fileInput=document.getElementById("file-input"),saveBtn=document.getElementById("save-btn"),editorContainer=document.getElementById("editor-container");let currentData=null,currentFileName="save.json";const statusBar=document.querySelector(".status-bar");function updateStatusBar(){if(!statusBar)return;const isOffline=!navigator.onLine;DEBUG_MODE&&isOffline?(statusBar.className="status-bar active offline-debug-mode",statusBar.textContent="üêõüì° DEBUG MODE + OFFLINE - Using debug save file without internet"):DEBUG_MODE?(statusBar.className="status-bar active debug-mode",statusBar.textContent="üêõ DEBUG MODE ACTIVE - Using debug save file"):isOffline?(statusBar.className="status-bar active offline-mode",statusBar.textContent="üì° OFFLINE MODE - Working without internet connection"):(statusBar.className="status-bar",statusBar.textContent="")}function extractSaveNumber(filename){if(!filename)return null;const patterns=[/Data(\d+)/i,/save[_\s]*(\d+)/i,/slot[_\s]*(\d+)/i,/file[_\s]*(\d+)/i];for(const pattern of patterns){const match=filename.match(pattern);if(match&&match[1])return match[1]}return null}function updateSaveFileIndicator(){const indicator=document.getElementById("save-file-indicator");if(indicator){const saveNumber=extractSaveNumber(currentFileName);indicator.textContent=saveNumber?`Save File #${saveNumber}`:`Editing: ${currentFileName}`}}window.addEventListener("online",updateStatusBar),window.addEventListener("offline",updateStatusBar),updateStatusBar(),DEBUG_MODE&&fetch(DEBUG_FILE_PATH).then((response=>{if(!response.ok)throw new Error(`Failed to load debug file: ${response.statusText}`);return response.json()})).then((data=>{currentData=data,currentFileName="debug_save.json",renderEditor(editorContainer,currentData,(newData=>{currentData=newData})),saveBtn.disabled=!1,console.log("Debug mode: Auto-loaded save file from",DEBUG_FILE_PATH)})).catch((err=>{console.error("Debug mode: Failed to load debug file:",err),alert("Debug mode enabled but failed to load file from: ./debug/save.json\n\nError: "+err.message)}));const Schema={labels:{bozu_name:"Hero Name (Suikoden 2)",bozu_name2:"Hero Name (Real)",macd_name:"Hero Name (Suikoden 1)",base_name:"Castle Name",m_base_name:"Suikoden 1 HQ Name",kari_name:"Greenhill Mission Aliases",food_menu:"Castle Menu Orders",team_name:"Army Name",play_time:"Play Time",base_lv:"Castle Level",furo_info:"Bath House Level",kaji_lv:"Blacksmith Level",ninki:"Popularity",gold:"Potch",money:"Potch",base_item:"Warehouse Items",furo_item:"Bath Items",room_item:"Room Items",version:"Save Version",chara_data:"Character Data",war_data:"War Battle Data",nakam_1_num:"Recruited Stars",nige_cnt:"Escaped Battles",item_no:"Item ID",use_cnt:"Count",ckd_info:"Character Status List",leader_no:"War Leader IDs",sub_no:"War Sub-Unit IDs",sub_to_leader:"Sub-Unit Assignment",chara_flag:"Recruited Characters",exit_member:"Active Party Members",event_item:"Key Items",party_item:"Inventory",area_no:"Area Location",town_no:"Town No",map_no:"Map No",px:"Player X Coordinate",py:"Player Y Coordinate",date_time_now:"Last Modified (In-Game)",c_varia_dat:"Battle Character Data",para:"Stats",mon_eqp:"Runes",item_eqp:"Accessories",bogu_eqp:"Equipment",level:"Level",exp:"Experience",now_hp:"Current HP",max_hp:"Max HP",now_mp:"Current MP",max_mp:"Max MP",buki_lv:"Weapon Level",buki_mon:"Weapon Rune",todome:"Killed Enemies",mp:"MP"},groups:{General:["exit_member","location","play_time","date_time_now","bozu_name","bozu_name2","macd_name","base_name","m_base_name","team_name","base_lv","furo_info","kaji_lv","ninki","gold","kari_name","food_menu"],"Battle Characters":["c_varia_dat"],"Party Bag":["event_item","party_item"],Warehouse:["base_item","room_item"],Bath:["furo_item"],"Recruited Characters":["chara_flag"]},renderers:{base_item:"table",furo_item:"bath_items",room_item:"room_items",event_item:"key_items",party_item:"table",chara_flag:"recruitment",c_varia_dat:"battle_characters",play_time:"play_time",furo_info:"bath_level",exit_member:"party_members",kari_name:"castle_editors_combined",food_menu:"skip",location:"location"},tableColumns:{base_item:["item_no","use_cnt"],furo_item:["item_no","use_cnt"],room_item:["item_no","use_cnt"],party_item:["item_no","use_cnt"]}};function renderEditor(container,data,onUpdate){container.innerHTML="";Schema.groupPaths||(Schema.groupPaths={General:null,Warehouse:"game_data",Bath:"game_data","Party Bag":"party_data","Recruited Characters":null,"Battle Characters":"chara_data",System:"game_data"});let tabContainer=document.getElementById("editor-tabs");tabContainer||(tabContainer=document.createElement("div"),tabContainer.id="editor-tabs",container.appendChild(tabContainer)),tabContainer.innerHTML="",tabContainer.className="tabs";const tabsLeft=document.createElement("div");tabsLeft.className="tabs-left";const tabsRight=document.createElement("div");tabsRight.className="tabs-right";const contentContainer=container,groupKeys=Object.keys(Schema.groups);let activeTab=groupKeys[0];const tabButtons={};groupKeys.forEach((groupName=>{const btn=document.createElement("button");btn.textContent=groupName,btn.className="tab-button outline",btn.id=`tab-${groupName.toLowerCase().replace(/\s+/g,"-")}`,btn.dataset.tabName=groupName,groupName===activeTab&&btn.classList.remove("outline"),tabButtons[groupName]=btn,btn.addEventListener("click",(()=>{Object.values(tabButtons).forEach((b=>b.classList.add("outline"))),btn.classList.remove("outline");document.querySelectorAll(".tabs-right .tab-button").forEach((b=>b.classList.add("outline"))),contentContainer.id=`content-${groupName.toLowerCase().replace(/\s+/g,"-")}`,renderTabContent(contentContainer,groupName,data,onUpdate)})),tabsLeft.appendChild(btn)})),tabContainer.appendChild(tabsLeft);const saveFileIndicator=document.createElement("div");saveFileIndicator.id="save-file-indicator",saveFileIndicator.className="save-file-indicator",saveFileIndicator.style.cssText="display: flex; align-items: center; padding: 0.4rem 0.8rem; font-size: 0.75rem; font-weight: 600; color: var(--pico-primary); background: rgba(var(--pico-primary-rgb, 52, 152, 219), 0.1); border-radius: 6px;";const saveNumber=extractSaveNumber(currentFileName);saveFileIndicator.textContent=saveNumber?`Save File #${saveNumber}`:`Editing: ${currentFileName}`,tabsRight.appendChild(saveFileIndicator),tabContainer.appendChild(tabsRight),contentContainer.innerHTML="",contentContainer.className="tab-content",contentContainer.id=`content-${activeTab.toLowerCase().replace(/\s+/g,"-")}`,renderTabContent(contentContainer,activeTab,data,onUpdate)}function renderTabContent(container,group,data,onUpdate){if(container.innerHTML="","Party Bag"===group){const title=document.createElement("h3");title.textContent="Party Items",title.style.cssText="margin: 0 0 1rem 0; font-size: 1.1rem; font-weight: 600;",container.appendChild(title)}const groupPath=Schema.groupPaths[group];let targetData=data;if(groupPath&&(targetData=data[groupPath],!targetData))return void(container.innerHTML="<p>No data available for this section.</p>");const keys=Schema.groups[group]||[];null!==groupPath?keys.forEach((key=>{if(void 0===targetData[key])return;const label=Schema.labels[key]||key,renderer=Schema.renderers?Schema.renderers[key]:null;if("skip"===renderer)return;let element;if("table"===renderer){const columns=Schema.tableColumns[key];element=createTableEditor(targetData[key],label,(newValue=>{targetData[key]=newValue}),columns)}else element="bath_items"===renderer?createBathItemsEditor(targetData[key],label,(newValue=>{targetData[key]=newValue})):"room_items"===renderer?createRoomItemsEditor(targetData[key],label,(newValue=>{targetData[key]=newValue})):"recruitment"===renderer?createRecruitmentEditor(targetData[key],label,(newValue=>{targetData[key]=newValue})):"battle_characters"===renderer?createBattleCharactersEditor(targetData[key],label,(newValue=>{targetData[key]=newValue})):"play_time"===renderer?createPlayTimeEditor(targetData[key],label,(newValue=>{targetData[key]=newValue})):"bath_level"===renderer?createBathLevelEditor(targetData[key],label,(newValue=>{targetData[key]=newValue})):"party_members"===renderer?createPartyMembersEditor(targetData[key],label,(newValue=>{targetData[key]=newValue})):"key_items"===renderer?createKeyItemsEditor(targetData[key],label,(newValue=>{targetData[key]=newValue})):"greenhill_aliases"===renderer?createGreenhillAliasesEditor(targetData[key],label,(newValue=>{targetData[key]=newValue})):"food_menu"===renderer?createFoodMenuEditor(targetData[key],label,(newValue=>{targetData[key]=newValue})):"castle_editors_combined"===renderer?createCastleEditorsCombined(data,targetData):createElementForValue(targetData[key],label,(newValue=>{targetData[key]=newValue}),targetData);container.appendChild(element)})):keys.forEach((key=>{if("location"===key){const element=createLocationEditor(data,"Map Location",(()=>{}));return void container.appendChild(element)}let value,sourceData;if(data.game_data&&void 0!==data.game_data[key]?(value=data.game_data[key],sourceData=data.game_data):data.party_data&&void 0!==data.party_data[key]?(value=data.party_data[key],sourceData=data.party_data):(value=data[key],sourceData=data),void 0===value)return;const label=Schema.labels[key]||key,renderer=Schema.renderers?Schema.renderers[key]:null;if("skip"===renderer)return;let element;if("table"===renderer){element=createTableEditor(value,label,(newValue=>{sourceData[key]=newValue}),Schema.tableColumns[key])}else element="bath_items"===renderer?createBathItemsEditor(value,label,(newValue=>{sourceData[key]=newValue})):"room_items"===renderer?createRoomItemsEditor(value,label,(newValue=>{sourceData[key]=newValue})):"recruitment"===renderer?createRecruitmentEditor(value,label,(newValue=>{sourceData[key]=newValue})):"battle_characters"===renderer?createBattleCharactersEditor(value,label,(newValue=>{sourceData[key]=newValue})):"play_time"===renderer?createPlayTimeEditor(value,label,(newValue=>{sourceData[key]=newValue})):"bath_level"===renderer?createBathLevelEditor(value,label,(newValue=>{sourceData[key]=newValue})):"party_members"===renderer?createPartyMembersEditor(value,label,(newValue=>{sourceData[key]=newValue})):"key_items"===renderer?createKeyItemsEditor(value,label,(newValue=>{sourceData[key]=newValue})):"greenhill_aliases"===renderer?createGreenhillAliasesEditor(value,label,(newValue=>{sourceData[key]=newValue})):"food_menu"===renderer?createFoodMenuEditor(value,label,(newValue=>{sourceData[key]=newValue})):"castle_editors_combined"===renderer?createCastleEditorsCombined(data,sourceData):"location"===renderer?createLocationEditor(data,label,(newValue=>{})):createElementForValue(value,label,(newValue=>{sourceData[key]=newValue}),sourceData);container.appendChild(element)}))}function createTableEditor(arr,key,updateCallback,columns){const container=document.createElement("div");container.className="table-editor-section";const title=document.createElement("h3");if(title.textContent=`${key} [${arr.length}]`,title.style.cssText="margin: 0 0 1rem 0; font-size: 1.25rem;",container.appendChild(title),key.includes("Party Bag")||key.includes("Inventory")||key.includes("Warehouse")){const description=document.createElement("p");description.id=`${key.toLowerCase().replace(/\s+/g,"-")}-description`,description.style.cssText="font-size: 0.85rem; color: var(--pico-muted-color); margin-bottom: 1rem;",description.innerHTML="<strong>Item Type Classification by Count:</strong><br>\n      ‚Ä¢ 0-9: Regular Items<br>\n      ‚Ä¢ 16: Equipment (Helmet, Armor, Shield, Accessories)<br>\n      ‚Ä¢ 32: Runes<br>\n      ‚Ä¢ 48: Farming Items<br>\n      ‚Ä¢ 64: Trade Items / Bath Items<br>\n      ‚Ä¢ 80: Base/Warehouse Items<br>\n      ‚Ä¢ 99+: Food Items [has specific values so be careful when it comes to use count]",container.appendChild(description)}const table=document.createElement("table");table.className="striped",table.id=`table-${key.toLowerCase().replace(/\s+/g,"-")}`;const thead=document.createElement("thead"),trHead=document.createElement("tr");let lookupTable=null;function getItemLookup(useCnt){return GameData?16===useCnt?null:32===useCnt?GameData.RUNES:48===useCnt?GameData.FARMING:64===useCnt?GameData.TRADE:80===useCnt?GameData.BASE_ITEM:useCnt>=99?GameData.FOOD:GameData.ITEMS:null}function getItemTypeName(useCnt){return 16===useCnt?"Equipment":32===useCnt?"Rune":48===useCnt?"Farming":64===useCnt?"Trade":80===useCnt?"Base Item":useCnt>=99?"Food":"Regular Item"}function getEquipmentName(itemNo){if(!GameData)return null;const extractName=value=>"string"==typeof value?value:"object"==typeof value&&null!==value&&value.name?value.name:null;return GameData.HELMET[itemNo]?extractName(GameData.HELMET[itemNo]):GameData.ARMOR[itemNo]?extractName(GameData.ARMOR[itemNo]):GameData.SHIELD[itemNo]?extractName(GameData.SHIELD[itemNo]):GameData.OTHER_EQUIP_GEAR&&GameData.OTHER_EQUIP_GEAR[itemNo]?extractName(GameData.OTHER_EQUIP_GEAR[itemNo]):null}if("undefined"!=typeof GameData&&(key.includes("Warehouse")?lookupTable=GameData.BASE_ITEM:(key.includes("Bath")||key.includes("Room"))&&(lookupTable=GameData.ITEMS)),lookupTable||arr.length>0){const th=document.createElement("th");th.textContent="Item Name",trHead.appendChild(th)}columns.forEach((col=>{const th=document.createElement("th");if(th.textContent=Schema.labels[col]||col,trHead.appendChild(th),"use_cnt"===col){const typeHeader=document.createElement("th");typeHeader.textContent="Item Type",trHead.insertBefore(typeHeader,th)}})),thead.appendChild(trHead),table.appendChild(thead);const tbody=document.createElement("tbody"),fragment=document.createDocumentFragment(),maxItems=Math.min(arr.length,200);for(let index=0;index<maxItems;index++){const item=arr[index],tr=document.createElement("tr");tr.id=`${key.toLowerCase().replace(/\s+/g,"-")}-row-${index}`;const itemUseCnt=item.use_cnt||0,itemId=item.item_no||0,itemLookup=getItemLookup(itemUseCnt),td=document.createElement("td");let itemName;if(16===itemUseCnt)itemName=getEquipmentName(itemId),td.textContent=itemName?`${itemId}: ${itemName}`:`Unknown Equipment (${itemId})`;else if(itemLookup){const lookupValue=itemLookup[itemId];"object"==typeof lookupValue&&null!==lookupValue&&lookupValue.name?td.textContent=`${itemId}: ${lookupValue.name}`:td.textContent="string"==typeof lookupValue?`${itemId}: ${lookupValue}`:`Unknown (${itemId})`}else td.textContent=`ID: ${itemId}`;td.style.fontStyle="italic",td.style.color="var(--pico-muted-color)",tr.appendChild(td),columns.forEach((col=>{if("use_cnt"===col){const typeTd=document.createElement("td");typeTd.textContent=getItemTypeName(item.use_cnt||0),typeTd.style.fontStyle="italic",typeTd.style.fontSize="0.85rem",typeTd.id=`type-${index}`,tr.appendChild(typeTd)}const td=document.createElement("td"),input=document.createElement("input");input.type="number",input.value=item[col],input.style.marginBottom="0",input.style.padding="0.25rem",input.addEventListener("input",(e=>{if(item[col]=parseFloat(e.target.value),"item_no"===col||"use_cnt"===col){const nameCell=tr.cells[0],newId=item.item_no||0,newUseCnt=item.use_cnt||0;if("use_cnt"===col){const typeCell=document.getElementById(`type-${index}`);typeCell&&(typeCell.textContent=getItemTypeName(newUseCnt))}if(16===newUseCnt){const newName=getEquipmentName(newId);nameCell.textContent=newName||`Unknown Equipment (${newId})`}else{const newLookup=getItemLookup(newUseCnt);nameCell.textContent=newLookup?newLookup[newId]||`Unknown (${newId})`:`ID: ${newId}`}}})),td.appendChild(input),tr.appendChild(td)})),fragment.appendChild(tr)}if(tbody.appendChild(fragment),arr.length>200){const tr=document.createElement("tr"),td=document.createElement("td");td.colSpan=columns.length+1,td.textContent=`... and ${arr.length-200} more items (hidden)`,tr.appendChild(td),tbody.appendChild(tr)}return table.appendChild(tbody),container.appendChild(table),container}function createBathItemsEditor(arr,key,updateCallback){const container=document.createElement("div");container.className="bath-items-editor-section";const title=document.createElement("h3");title.textContent=`${key} [${arr.length}]`,title.style.cssText="margin: 0 0 1rem 0; font-size: 1.25rem;",container.appendChild(title);const description=document.createElement("p");description.style.cssText="font-size: 0.85rem; color: var(--pico-muted-color); margin-bottom: 1rem;",description.innerHTML="<strong>Bath Items:</strong> All items use Trade category (use_cnt: 64). Paintings for indices 2 & 5, ornaments for other slots.",container.appendChild(description);const paintingItems=[{id:0,name:"None"}];if("undefined"!=typeof GameData&&GameData.TRADE){for(let id=18;id<=22;id++)GameData.TRADE[id]&&paintingItems.push({id:id,name:GameData.TRADE[id]});for(let id=42;id<=44;id++)GameData.TRADE[id]&&paintingItems.push({id:id,name:GameData.TRADE[id]})}const ornamentItems=[];if("undefined"!=typeof GameData&&GameData.TRADE)for(let id in GameData.TRADE){const numId=parseInt(id);(0===numId||numId>=1&&numId<=17||numId>=45&&numId<=50)&&ornamentItems.push({id:numId,name:GameData.TRADE[id]})}const sections=[{title:"Paintings",indices:[2,5],items:paintingItems,standalone:!0},{title:"Girl's Side (Left Ornaments)",indices:[0,1,3],items:ornamentItems,standalone:!1},{title:"Boy's Side (Right Ornaments)",indices:[4,6,7],items:ornamentItems,standalone:!1}],paintingsSection=sections[0],paintingDiv=document.createElement("div");paintingDiv.style.cssText="margin-bottom: 1.5rem; padding: 0.75rem; background: rgba(0,0,0,0.1); border-radius: 6px;";const paintingTitle=document.createElement("h4");paintingTitle.textContent=paintingsSection.title,paintingTitle.style.cssText="margin: 0 0 0.75rem 0; font-size: 0.9rem; color: var(--pico-primary);",paintingDiv.appendChild(paintingTitle),paintingsSection.indices.forEach((index=>{if(index>=arr.length)return;const item=arr[index],itemDiv=document.createElement("div");itemDiv.className="json-item",itemDiv.style.cssText="margin-bottom: 0.5rem;";const label=document.createElement("label");label.textContent=`Slot ${index}`,label.style.cssText="min-width: 80px; font-weight: 600;",itemDiv.appendChild(label);const select=document.createElement("select");select.style.cssText="flex: 1; margin-bottom: 0;",paintingsSection.items.forEach((opt=>{const option=document.createElement("option");option.value=opt.id,option.textContent=`${opt.id}: ${opt.name}`,item.item_no===opt.id&&(option.selected=!0),select.appendChild(option)})),select.addEventListener("change",(e=>{item.item_no=parseInt(e.target.value),item.use_cnt=64})),itemDiv.appendChild(select),paintingDiv.appendChild(itemDiv),64!==item.use_cnt&&(item.use_cnt=64)})),container.appendChild(paintingDiv);const ornamentsContainer=document.createElement("div");ornamentsContainer.style.cssText="display: grid; grid-template-columns: 1fr; gap: 1rem; margin-bottom: 1rem;",ornamentsContainer.className="bath-ornaments-grid";for(let i=1;i<sections.length;i++){const section=sections[i],sectionDiv=document.createElement("div");sectionDiv.style.cssText="padding: 0.75rem; background: rgba(0,0,0,0.1); border-radius: 6px;";const sectionTitle=document.createElement("h4");sectionTitle.textContent=section.title,sectionTitle.style.cssText="margin: 0 0 0.75rem 0; font-size: 0.9rem; color: var(--pico-primary);",sectionDiv.appendChild(sectionTitle),section.indices.forEach((index=>{if(index>=arr.length)return;const item=arr[index],itemDiv=document.createElement("div");itemDiv.className="json-item",itemDiv.style.cssText="margin-bottom: 0.5rem;";const label=document.createElement("label");label.textContent=`Slot ${index}`,label.style.cssText="min-width: 80px; font-weight: 600;",itemDiv.appendChild(label);const select=document.createElement("select");select.style.cssText="flex: 1; margin-bottom: 0;",section.items.forEach((opt=>{const option=document.createElement("option");option.value=opt.id,option.textContent=`${opt.id}: ${opt.name}`,item.item_no===opt.id&&(option.selected=!0),select.appendChild(option)})),select.addEventListener("change",(e=>{item.item_no=parseInt(e.target.value),item.use_cnt=64})),itemDiv.appendChild(select),sectionDiv.appendChild(itemDiv),64!==item.use_cnt&&(item.use_cnt=64)})),ornamentsContainer.appendChild(sectionDiv)}return container.appendChild(ornamentsContainer),container}function createRoomItemsEditor(arr,key,updateCallback){const details=document.createElement("details");details.open=!0,details.className="json-array";const summary=document.createElement("summary");summary.textContent=key+` [${arr.length}]`,details.appendChild(summary);const description=document.createElement("p");description.style.cssText="font-size: 0.85rem; color: var(--pico-color-amber-500); margin-bottom: 1rem; padding: 0.5rem; background: rgba(255, 193, 7, 0.1); border-left: 3px solid var(--pico-color-amber-500); border-radius: 4px;",description.innerHTML="<strong>‚ö†Ô∏è Testing Only:</strong> Room items functionality is experimental. We don't know how this affects the game, but these values exist in the save file. All items use Trade category (use_cnt: 64).",details.appendChild(description);const ornamentItems=[];if("undefined"!=typeof GameData&&GameData.TRADE)for(let id in GameData.TRADE){const numId=parseInt(id);(0===numId||numId>=1&&numId<=17||numId>=42&&numId<=50)&&ornamentItems.push({id:numId,name:GameData.TRADE[id]})}const sections=[{title:"",indices:[0,1,3],items:ornamentItems},{title:"",indices:[4,6,7],items:ornamentItems}],ornamentsContainer=document.createElement("div");return ornamentsContainer.style.cssText="display: grid; grid-template-columns: 1fr; gap: 1rem; margin-bottom: 1rem;",ornamentsContainer.className="bath-ornaments-grid",sections.forEach((section=>{const sectionDiv=document.createElement("div");sectionDiv.style.cssText="padding: 0.75rem; background: rgba(0,0,0,0.1); border-radius: 6px;",section.indices.forEach((index=>{if(index>=arr.length)return;const item=arr[index],itemDiv=document.createElement("div");itemDiv.className="json-item",itemDiv.style.cssText="margin-bottom: 0.5rem;";const label=document.createElement("label");label.textContent=`Slot ${index}`,label.style.cssText="min-width: 80px; font-weight: 600;",itemDiv.appendChild(label);const select=document.createElement("select");select.style.cssText="flex: 1; margin-bottom: 0;",section.items.forEach((opt=>{const option=document.createElement("option");option.value=opt.id,option.textContent=`${opt.id}: ${opt.name}`,item.item_no===opt.id&&(option.selected=!0),select.appendChild(option)})),select.addEventListener("change",(e=>{item.item_no=parseInt(e.target.value),item.use_cnt=64})),itemDiv.appendChild(select),sectionDiv.appendChild(itemDiv),64!==item.use_cnt&&(item.use_cnt=64)})),ornamentsContainer.appendChild(sectionDiv)})),details.appendChild(ornamentsContainer),details}function createRecruitmentEditor(arr,key,updateCallback){const container=document.createElement("div");container.className="recruitment-editor-section";const title=document.createElement("h3");title.textContent=`${key} [${arr.length} characters]`,title.style.cssText="margin: 0 0 1rem 0; font-size: 1.25rem;",container.appendChild(title);const description=document.createElement("p");description.style.cssText="font-size: 0.85rem; color: var(--pico-muted-color); margin-bottom: 1rem;",description.innerHTML="<strong>Recruitment Status Values:</strong><br>\n    ‚Ä¢ 1: Spoke to<br>\n    ‚Ä¢ 70: Auto Join<br>\n    ‚Ä¢ 71: Manual Recruit<br>\n    ‚Ä¢ 86: Event Locked Not Party<br>\n    ‚Ä¢ 212: Deceased<br>\n    ‚Ä¢ 213: On Leave",container.appendChild(description);const table=document.createElement("table");table.className="striped";const thead=document.createElement("thead"),trHead=document.createElement("tr");["Index","Character Name","Recruitment Flag"].forEach((h=>{const th=document.createElement("th");th.textContent=h,trHead.appendChild(th)})),thead.appendChild(trHead),table.appendChild(thead);const tbody=document.createElement("tbody"),lookupTable="undefined"!=typeof GameData?GameData.CHARACTERS:null;return arr.forEach(((flagValue,index)=>{if(0===index)return;const tr=document.createElement("tr"),tdIndex=document.createElement("td");tdIndex.textContent=index,tdIndex.style.fontWeight="bold",tdIndex.style.width="60px",tr.appendChild(tdIndex);const tdName=document.createElement("td"),charEntry=lookupTable&&lookupTable[index];tdName.textContent=charEntry?"string"==typeof charEntry?charEntry:charEntry.name||`Character ${index}`:`Character ${index}`,tdName.style.fontStyle="italic",tdName.style.color="var(--pico-muted-color)",tr.appendChild(tdName);const tdFlag=document.createElement("td"),input=document.createElement("input");input.type="number",input.value=flagValue,input.style.marginBottom="0",input.style.padding="0.25rem",input.style.width="80px",input.addEventListener("input",(e=>{arr[index]=parseFloat(e.target.value)})),tdFlag.appendChild(input),tr.appendChild(tdFlag),tbody.appendChild(tr)})),table.appendChild(tbody),container.appendChild(table),container}function createPlayTimeEditor(arr,key,updateCallback){const div=document.createElement("div");div.className="json-item",div.id="play-time-editor";const label=document.createElement("label");label.textContent=key,div.appendChild(label);const fieldsContainer=document.createElement("div");fieldsContainer.style.cssText="display: flex; gap: 1rem; align-items: center;";return["Hours","Minutes","Seconds"].forEach(((timeLabel,i)=>{const fieldGroup=document.createElement("div");fieldGroup.style.cssText="display: flex; flex-direction: column; gap: 0.25rem;";const fieldLabel=document.createElement("label");fieldLabel.textContent=timeLabel,fieldLabel.style.cssText="font-size: 0.85rem; margin-bottom: 0;",fieldGroup.appendChild(fieldLabel);const input=document.createElement("input");input.type="number",input.value=arr[i]||0,input.style.cssText="width: 80px; margin-bottom: 0;",0===i?(input.min="0",input.max="999"):(input.min="0",input.max="59"),input.addEventListener("input",(e=>{let value=parseFloat(e.target.value)||0;const min=parseFloat(input.min),max=parseFloat(input.max);value<min&&(value=min),value>max&&(value=max),e.target.value=value,arr[i]=value})),fieldGroup.appendChild(input),fieldsContainer.appendChild(fieldGroup)})),div.appendChild(fieldsContainer),div}function createBathLevelEditor(arr,key,updateCallback){const div=document.createElement("div");div.className="json-item",div.id="bath-level-editor";const label=document.createElement("label");label.textContent=key,div.appendChild(label);const input=document.createElement("input");return input.type="number",input.value=arr[0]||0,input.readOnly=!0,input.style.opacity="0.6",input.style.cursor="not-allowed",input.title="Bath House Level is read-only",div.appendChild(input),div}function createGreenhillAliasesEditor(arr,key,updateCallback){const div=document.createElement("div");div.className="json-item",div.id="greenhill-aliases-editor";const label=document.createElement("label");label.textContent=key,div.appendChild(label);const aliasesContainer=document.createElement("div");aliasesContainer.style.cssText="display: flex; flex-direction: column; gap: 0.5rem;";const aliasLabels=["Hero's Alias","Nanami's Alias","Flik's Alias"];for(let i=0;i<3&&i<arr.length;i++){const aliasGroup=document.createElement("div");aliasGroup.style.cssText="display: flex; gap: 1rem; align-items: center;";const aliasLabel=document.createElement("label");aliasLabel.textContent=aliasLabels[i],aliasLabel.style.cssText="min-width: 120px; margin-bottom: 0;",aliasGroup.appendChild(aliasLabel);const input=document.createElement("input");input.type="text",input.value=arr[i]||"",input.style.cssText="flex: 1; margin-bottom: 0;",2===i?(input.readOnly=!0,input.style.opacity="0.6",input.style.cursor="not-allowed",input.title="Flik's name is read-only"):input.addEventListener("input",(e=>{arr[i]=e.target.value})),aliasGroup.appendChild(input),aliasesContainer.appendChild(aliasGroup)}return div.appendChild(aliasesContainer),div}function createCastleEditorsCombined(data,sourceData){const wrapper=document.createElement("div");if(wrapper.className="castle-editors-combined",wrapper.style.cssText="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 1rem; margin-top: 1rem;",sourceData.kari_name){const aliasesSection=createGreenhillAliasesEditor(sourceData.kari_name,"Greenhill Mission Aliases",(newValue=>{sourceData.kari_name=newValue}));wrapper.appendChild(aliasesSection)}if(sourceData.food_menu){const foodSection=createFoodMenuEditor(sourceData.food_menu,"Castle Restaurant Menu",(newValue=>{sourceData.food_menu=newValue}));wrapper.appendChild(foodSection)}return wrapper}function createPartyMembersEditor(arr,key,updateCallback){const container=document.createElement("div");container.className="party-members-section";const title=document.createElement("h3");title.textContent=key,container.appendChild(title);const description=document.createElement("p");description.style.cssText="font-size: 0.875rem; color: var(--pico-muted-color); margin-bottom: 1rem;",description.textContent="First 6 slots are battle characters (0-83 only), last 2 slots are convoy members (full roster 0-124).",container.appendChild(description);const gridContainer=document.createElement("div");gridContainer.className="party-members-grid";for(let index=0;index<Math.min(arr.length,8);index++){const charId=arr[index],slotDiv=document.createElement("div");slotDiv.className="json-item",slotDiv.style.cssText="margin-bottom: 0;";const label=document.createElement("label");label.textContent=index<6?`Battle Slot ${index+1}`:"Convoy "+(index-5),label.style.cssText="min-width: 120px;",slotDiv.appendChild(label);const select=document.createElement("select");select.style.cssText="flex: 1; margin-bottom: 0;";const noneOption=document.createElement("option");if(noneOption.value=0,noneOption.textContent="0: None",select.appendChild(noneOption),index<6)for(let id=1;id<=83;id++){const char=GameData&&GameData.CHARACTERS&&GameData.CHARACTERS[id];if(char){const option=document.createElement("option");option.value=id,option.textContent=`${id}: ${char.name}`,select.appendChild(option)}}else GameData&&GameData.CHARACTERS&&Object.keys(GameData.CHARACTERS).forEach((id=>{const numId=parseInt(id),char=GameData.CHARACTERS[numId];if(char&&numId>0){const option=document.createElement("option");option.value=numId,option.textContent=`${numId}: ${char.name}`,select.appendChild(option)}}));select.value=charId,select.addEventListener("change",(e=>{arr[index]=parseInt(e.target.value)})),slotDiv.appendChild(select),gridContainer.appendChild(slotDiv)}return container.appendChild(gridContainer),container}function createKeyItemsEditor(arr,key,updateCallback){const container=document.createElement("div");container.className=" key-items-editor",container.id="key-items-editor",container.style.cssText="padding: 1rem; background: rgba(0, 0, 0, 0.1); border-radius: 6px;";const label=document.createElement("label");label.textContent=key,label.style.cssText="font-weight: 600; font-size: 0.9rem; margin-bottom: 0.5rem;",container.appendChild(label);const gridContainer=document.createElement("div");gridContainer.className="two-css-col w-100";const keyItemIds=[29,35,36,37,38,39,40,41,42,43,44,45,46,51,52,53,54,55,72,73,74];for(let index=0;index<Math.min(arr.length,6);index++){const itemId=arr[index],slotDiv=document.createElement("div");slotDiv.className="json-item",slotDiv.style.cssText="margin-bottom: 0.5rem; display: flex; gap: 0.5rem; align-items: center;";const slotLabel=document.createElement("label");slotLabel.textContent=`Slot ${index+1}`,slotLabel.style.cssText="min-width: 60px; margin-bottom: 0;",slotDiv.appendChild(slotLabel);const select=document.createElement("select");select.style.cssText="flex: 1; margin-bottom: 0;";const noneOption=document.createElement("option");noneOption.value=0,noneOption.textContent="0: None",select.appendChild(noneOption),keyItemIds.forEach((id=>{const itemName=GameData&&GameData.ITEMS&&GameData.ITEMS[id]?GameData.ITEMS[id]:`Unknown Item ${id}`,option=document.createElement("option");option.value=id,option.textContent=`${id}: ${itemName}`,select.appendChild(option)})),select.value=itemId,select.addEventListener("change",(e=>{arr[index]=parseInt(e.target.value)})),slotDiv.appendChild(select),gridContainer.appendChild(slotDiv)}return container.appendChild(gridContainer),container}function createFoodMenuEditor(arr,key,updateCallback){const div=document.createElement("div");div.className="json-item",div.id="food-menu-editor";const label=document.createElement("label");label.textContent=key,div.appendChild(label);const menuContainer=document.createElement("div");menuContainer.style.cssText="display: flex; flex-direction: column; gap: 0.5rem;";for(let index=0;index<Math.min(arr.length,6);index++){const recipeId=arr[index],menuGroup=document.createElement("div");menuGroup.className="json-item",menuGroup.style.cssText="margin-bottom: 0;";const slotLabel=document.createElement("label");slotLabel.textContent=`Slot ${index+1}`,slotLabel.style.cssText="min-width: 80px;",menuGroup.appendChild(slotLabel);const select=document.createElement("select");select.style.cssText="margin-bottom: 0;";const noneOption=document.createElement("option");noneOption.value=0,noneOption.textContent="0: None",select.appendChild(noneOption),GameData&&GameData.FOOD&&Object.entries(GameData.FOOD).forEach((([id,name])=>{if("0"!==id){const option=document.createElement("option");option.value=id,option.textContent=`${id}: ${name}`,select.appendChild(option)}})),select.value=recipeId,select.addEventListener("change",(e=>{const newId=parseInt(e.target.value);arr[index]=newId})),menuGroup.appendChild(select),menuContainer.appendChild(menuGroup)}return div.appendChild(menuContainer),div}function createLocationEditor(data,key,updateCallback){const container=document.createElement("div");container.className="json-item location-editor",container.id="location-editor";const label=document.createElement("label");label.textContent="Map Location",label.style.cssText="font-weight: bold; margin-bottom: 1rem; display: block;",container.appendChild(label);const fieldsContainer=document.createElement("div");fieldsContainer.style.cssText="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; padding: 1rem; background: rgba(0,0,0,0.1); border-radius: 6px; width:100%";return[{key:"area_no",label:"Area Location",source:"game_data"},{key:"town_no",label:"Town No",source:"game_data"},{key:"map_no",label:"Map No",source:"game_data"},{key:"px",label:"Player X Coordinate",source:"root"},{key:"py",label:"Player Y Coordinate",source:"root"}].forEach((field=>{const fieldGroup=document.createElement("div");fieldGroup.className="json-item",fieldGroup.style.cssText="margin-bottom: 0;";const fieldLabel=document.createElement("label");fieldLabel.textContent=field.label,fieldLabel.style.cssText="min-width: 150px;",fieldGroup.appendChild(fieldLabel);const input=document.createElement("input");let value,sourceData;input.type="number",input.style.cssText="margin-bottom: 0;","game_data"===field.source?(sourceData=data.game_data,value=sourceData?sourceData[field.key]:0):(sourceData=data,value=sourceData[field.key]),input.value=value||0,input.addEventListener("input",(e=>{const newValue=parseFloat(e.target.value)||0;sourceData[field.key]=newValue})),fieldGroup.appendChild(input),fieldsContainer.appendChild(fieldGroup)})),container.appendChild(fieldsContainer),container}function filterRunesForCharacter(characterIndex,slotIndex){if(!GameData||!GameData.RUNES)return[];const allowedRunes=[];return Object.entries(GameData.RUNES).forEach((([id,runeData])=>{const runeName="string"==typeof runeData?runeData:runeData.name,attrs=runeData.attrs||[];if("0"===id)return void allowedRunes.push({id:0,name:runeName,attrs:attrs});if(attrs.includes("ExR"))return;const hasSlotAttr=attrs.includes("HR")||attrs.includes("RH")||attrs.includes("LH");let passesSlotCheck=!1;if(0===slotIndex?passesSlotCheck=!hasSlotAttr||attrs.includes("HR"):1===slotIndex?passesSlotCheck=!hasSlotAttr||(attrs.includes("RH")||attrs.includes("Wep"))&&!attrs.includes("LH"):2===slotIndex&&(passesSlotCheck=!hasSlotAttr||(attrs.includes("LH")||attrs.includes("Wep"))&&!attrs.includes("RH")),!passesSlotCheck)return;const hasCharacterMatch=attrs.includes("N")||attrs.some((attr=>{const num=parseInt(attr);return!isNaN(num)&&num===characterIndex}));attrs.some((attr=>{const num=parseInt(attr);return!isNaN(num)}))&&!hasCharacterMatch||allowedRunes.push({id:parseInt(id),name:runeName,attrs:attrs})})),allowedRunes}function createBattleCharactersEditor(arr,key,updateCallback){const container=document.createElement("div");container.className="battle-characters-section";const title=document.createElement("h3");title.textContent=`${key} [${Math.min(arr.length,84)} playable characters]`,title.style.cssText="margin: 0 0 1rem 0; font-size: 1.25rem;",container.appendChild(title);const lookupTable="undefined"!=typeof GameData?GameData.CHARACTERS:null,filterContainer=document.createElement("div");filterContainer.style.cssText="margin-bottom: 1.5rem; padding: 1rem; background: rgba(0,0,0,0.1); border-radius: 6px;";const filterLabel=document.createElement("label");filterLabel.textContent="Filter by Character Type:",filterLabel.style.cssText="display: block; margin-bottom: 0.5rem; font-weight: bold; font-size: 0.75rem;",filterContainer.appendChild(filterLabel);const filterSelect=document.createElement("select");filterSelect.style.cssText="width: 100%; max-width: 200px; margin-bottom: 0; font-size: 0.75rem;",filterSelect.id="character-type-filter";[{value:"all",label:"All Characters"},{value:"M",label:"Male"},{value:"F",label:"Female"},{value:"K",label:"Kobold"},{value:"W",label:"Winger"},{value:"Z",label:"Monster"},{value:"N",label:"Noble"}].forEach((opt=>{const option=document.createElement("option");option.value=opt.value,option.textContent=opt.label,filterSelect.appendChild(option)})),filterContainer.appendChild(filterSelect),container.appendChild(filterContainer);const maxIndex=Math.min(arr.length,84),statLabels=["Strength","Dexterity","Protection","Magic","Magic Defense","Speed","Luck"],equipmentLabels=["Head Rune","Right Hand Rune","Left Hand Rune"];for(let index=1;index<maxIndex;index++){const charData=arr[index],entry=lookupTable&&lookupTable[index],charName=entry?"string"==typeof entry?entry:entry.name||`Character ${index}`:`Character ${index}`;if(!charName||"N/A"===charName||""===charName||""===charName.trim())continue;const charAttrs=entry&&entry.attrs?entry.attrs:[],charDetails=document.createElement("details");charDetails.open=!1,charDetails.className="json-object",charDetails.dataset.charIndex=index,charAttrs.includes("M")&&(charDetails.dataset.isMale="true"),charAttrs.includes("F")&&(charDetails.dataset.isFemale="true"),charAttrs.includes("K")&&(charDetails.dataset.isKobold="true"),charAttrs.includes("W")&&(charDetails.dataset.isWinger="true"),charAttrs.includes("Z")&&(charDetails.dataset.isMonster="true"),charAttrs.includes("N")&&(charDetails.dataset.isNoble="true");const charSummary=document.createElement("summary");charSummary.innerHTML=`<strong>${index}:</strong> ${charName}`,charDetails.appendChild(charSummary);const columnsContainer=document.createElement("div");columnsContainer.className="grid g-2-col";const leftColumn=document.createElement("div");leftColumn.style.cssText="display: flex; flex-direction: column; gap: 1rem;";const rightColumn=document.createElement("div");rightColumn.style.cssText="display: flex; flex-direction: column; gap: 1rem;";const generalContainer=document.createElement("div");generalContainer.className="battle-character-general",generalContainer.id=`char-${index}-general`;const generalTitle=document.createElement("h4");generalTitle.textContent="General",generalTitle.style.cssText="margin: 0 0 0.5rem 0; font-size: 1rem;",generalContainer.appendChild(generalTitle);if([{prop:"level",label:"Level"},{prop:"exp",label:"Experience"},{prop:"max_hp",label:"Max HP"},{prop:"now_hp",label:"Current HP"},{prop:"todome",label:"Killed Enemies"}].forEach((field=>{if(void 0!==charData[field.prop]){const fieldDiv=document.createElement("div");fieldDiv.className="json-item";const label=document.createElement("label");label.textContent=field.label,fieldDiv.appendChild(label);const input=document.createElement("input");input.type="number",input.value=charData[field.prop],input.addEventListener("input",(e=>{charData[field.prop]=parseFloat(e.target.value)})),fieldDiv.appendChild(input),generalContainer.appendChild(fieldDiv)}})),leftColumn.appendChild(generalContainer),charData.mp&&Array.isArray(charData.mp)){const mpContainer=document.createElement("div");mpContainer.className="battle-character-magic",mpContainer.id=`char-${index}-magic`;const mpTitle=document.createElement("h4");mpTitle.textContent="Magic",mpTitle.style.cssText="margin: 0 0 0.5rem 0; font-size: 1rem;",mpContainer.appendChild(mpTitle);const mpLevels=["Level 1","Level 2","Level 3","Level 4"],maxMP=153,mpPerSquare=17;charData.mp.forEach(((value,i)=>{if(i<mpLevels.length){const mpDiv=document.createElement("div");mpDiv.className="json-item mp-level gap-1",mpDiv.style.cssText="display: flex; align-items: center;";const label=document.createElement("label");label.textContent=mpLevels[i],mpDiv.appendChild(label);const input=document.createElement("input");input.type="number",input.min="0",input.max=maxMP.toString(),input.value=value,input.style.maxWidth="80px",input.addEventListener("input",(e=>{const newValue=Math.min(maxMP,Math.max(0,parseFloat(e.target.value)||0));e.target.value=newValue,charData.mp[i]=newValue,updateSquares()})),mpDiv.appendChild(input);const squaresDiv=document.createElement("div");squaresDiv.className="mp-squares",squaresDiv.style.cssText="display: flex; gap: 2px; font-size: 0.9rem; line-height: 1;";const updateSquares=()=>{const currentValue=parseFloat(input.value)||0,filledSquares=Math.floor(currentValue/mpPerSquare),totalSquares=Math.ceil(maxMP/mpPerSquare);squaresDiv.innerHTML="";for(let j=0;j<totalSquares;j++){const square=document.createElement("span");square.textContent=j<filledSquares?"‚ñ†":"‚ñ°",square.style.color=j<filledSquares?"var(--pico-primary)":"var(--pico-muted-color)",squaresDiv.appendChild(square)}};updateSquares(),mpDiv.appendChild(squaresDiv),mpContainer.appendChild(mpDiv)}})),leftColumn.appendChild(mpContainer)}const weaponContainer=document.createElement("div");weaponContainer.className="battle-character-weapon",weaponContainer.id=`char-${index}-weapon`;const weaponTitle=document.createElement("h4");if(weaponTitle.textContent="Weapon",weaponTitle.style.cssText="margin: 0 0 0.5rem 0; font-size: 1rem;",weaponContainer.appendChild(weaponTitle),void 0!==charData.buki_lv){const weaponLvDiv=document.createElement("div");weaponLvDiv.className="json-item";const label=document.createElement("label");label.textContent="Weapon Level",weaponLvDiv.appendChild(label);const input=document.createElement("input");input.type="number",input.value=charData.buki_lv,input.addEventListener("input",(e=>{charData.buki_lv=parseFloat(e.target.value)})),weaponLvDiv.appendChild(input),weaponContainer.appendChild(weaponLvDiv)}rightColumn.appendChild(weaponContainer),Object.keys(charData).forEach((prop=>{if(["level","exp","max_hp","now_hp","todome","mp"].includes(prop))return;if("buki_lv"===prop)return;let el;if("para"===prop&&Array.isArray(charData[prop])){const paraContainer=document.createElement("div");paraContainer.className="battle-character-stats",paraContainer.id=`char-${index}-stats`;const statsTitle=document.createElement("h4");return statsTitle.textContent="Stats",statsTitle.style.cssText="margin: 0 0 0.5rem 0; font-size: 1rem;",paraContainer.appendChild(statsTitle),charData[prop].forEach(((value,i)=>{if(i<statLabels.length){const statDiv=document.createElement("div");statDiv.className="json-item";const label=document.createElement("label");label.textContent=statLabels[i],statDiv.appendChild(label);const input=document.createElement("input");input.type="number",input.value=value,input.addEventListener("input",(e=>{charData[prop][i]=parseFloat(e.target.value)})),statDiv.appendChild(input),paraContainer.appendChild(statDiv)}})),void leftColumn.appendChild(paraContainer)}if("mon_eqp"===prop&&Array.isArray(charData[prop])){const eqpContainer=document.createElement("div");eqpContainer.className="runes-equiped-section",eqpContainer.id=`char-${index}-runes`;const runesTitle=document.createElement("h4");return runesTitle.textContent="Runes",runesTitle.style.cssText="margin: 0 0 0.5rem 0; font-size: 1rem;",eqpContainer.appendChild(runesTitle),charData[prop].forEach(((value,i)=>{if(i<equipmentLabels.length){const eqpDiv=document.createElement("div");eqpDiv.className="json-item runes",eqpDiv.style.display="flex",eqpDiv.style.gap="1rem",eqpDiv.style.alignItems="center";const slotLabel=document.createElement("span");slotLabel.textContent=`${equipmentLabels[i]}:`,slotLabel.style.fontWeight="bold",slotLabel.style.minWidth="120px",eqpDiv.appendChild(slotLabel);const select=document.createElement("select");select.style.marginBottom="0",select.style.flex="1";const allowedRunes=filterRunesForCharacter(index,i);let isLocked=!1;if(value&&GameData&&GameData.RUNES&&GameData.RUNES[value]){isLocked=(GameData.RUNES[value].attrs||[]).includes("X")}allowedRunes.forEach((rune=>{const option=document.createElement("option");option.value=rune.id,option.textContent=`${rune.id}: ${rune.name}`,value===rune.id&&(option.selected=!0),select.appendChild(option)})),isLocked&&0!==value?(select.disabled=!0,select.style.opacity="0.6",select.style.cursor="not-allowed",select.title="This rune is locked and cannot be changed"):(select.value=value||0,select.addEventListener("change",(e=>{charData[prop][i]=parseInt(e.target.value)}))),eqpDiv.appendChild(select),eqpContainer.appendChild(eqpDiv)}})),void rightColumn.appendChild(eqpContainer)}if("bogu_eqp"===prop&&Array.isArray(charData[prop])){const boguContainer=document.createElement("div");boguContainer.className="equipment-worn-section",boguContainer.id=`char-${index}-equipment`;const equipmentTitle=document.createElement("h4");equipmentTitle.textContent="Equipment",equipmentTitle.style.cssText="margin: 0 0 0.5rem 0; font-size: 1rem;",boguContainer.appendChild(equipmentTitle);const isBeast=GameData&&GameData.BEASTS&&GameData.BEASTS.includes(index),equipmentSlots=[{label:"Helmet",category:"HELMET"},{label:"Armor",category:"ARMOR"},{label:"Shield",category:"SHIELD"}];return charData[prop].forEach(((value,i)=>{if(i<equipmentSlots.length){const boguDiv=document.createElement("div");boguDiv.className="json-item equipment",boguDiv.style.display="flex",boguDiv.style.gap="1rem",boguDiv.style.alignItems="center";const slotLabel=document.createElement("span");slotLabel.textContent=`${equipmentSlots[i].label}:`,slotLabel.style.fontWeight="bold",slotLabel.style.minWidth="80px",boguDiv.appendChild(slotLabel);const select=document.createElement("select");select.style.marginBottom="0",select.style.flex="1";const categoryData=GameData&&GameData[equipmentSlots[i].category]?GameData[equipmentSlots[i].category]:{},isShieldSlot=2===i,canEquipShield=[2,5,7,9,12,13,23,28,33,35,39,64].includes(index);if(isBeast){const option=document.createElement("option");option.value=0,option.textContent="0: None (Beast/Monster - Cannot equip)",option.selected=!0,select.appendChild(option),select.disabled=!0,select.style.opacity="0.6",select.style.cursor="not-allowed",charData[prop][i]=0}else if(isShieldSlot&&!canEquipShield){const option=document.createElement("option");option.value=0,option.textContent="0: None (Cannot equip shields)",option.selected=!0,select.appendChild(option),select.disabled=!0,select.style.opacity="0.6",select.style.cursor="not-allowed",charData[prop][i]=0}else{const charEntry=lookupTable&&lookupTable[index],charAttrs=charEntry&&charEntry.attrs?charEntry.attrs:[];Object.entries(categoryData).forEach((([id,itemData])=>{let itemName,itemAttrs;if("string"==typeof itemData)itemName=itemData,itemAttrs=null;else{if("object"!=typeof itemData||!itemData.name)return;itemName=itemData.name,itemAttrs=itemData.attrs||[]}if("ARMOR"===equipmentSlots[i].category&&itemAttrs&&itemAttrs.length>0){if(!itemAttrs.some((attr=>charAttrs.includes(attr)))&&"0"!==id)return}if("HELMET"===equipmentSlots[i].category&&itemAttrs&&itemAttrs.length>0){if(!itemAttrs.some((attr=>charAttrs.includes(attr)))&&"0"!==id)return}const option=document.createElement("option");option.value=id,option.textContent=itemName,select.appendChild(option)})),select.value=value||0,select.addEventListener("change",(e=>{charData[prop][i]=parseInt(e.target.value)}))}boguDiv.appendChild(select),boguContainer.appendChild(boguDiv)}})),void rightColumn.appendChild(boguContainer)}if("item_eqp"===prop&&Array.isArray(charData[prop])){const itemContainer=document.createElement("div");itemContainer.className="equip-accessories-section",itemContainer.id=`char-${index}-accessories`;const isBeast=GameData&&GameData.BEASTS&&GameData.BEASTS.includes(index),accessoriesTitle=document.createElement("h4");if(accessoriesTitle.textContent=`Accessories [${charData[prop].length}]`,accessoriesTitle.style.cssText="margin: 0 0 0.5rem 0; font-size: 1rem;",itemContainer.appendChild(accessoriesTitle),isBeast){const disabledMsg=document.createElement("p");return disabledMsg.textContent="Beast/Monster character - Cannot equip accessories",disabledMsg.style.cssText="color: var(--pico-muted-color); font-style: italic; margin: 0.5rem 0;",itemContainer.appendChild(disabledMsg),void rightColumn.appendChild(itemContainer)}const note=document.createElement("p");return note.textContent="A Smart dropdown will be added later. In the meantime, check the Data Values tab to guide you in editing the values below.",note.style.cssText="font-size: 0.85rem; color: var(--pico-muted-color); font-style: italic; margin: 0.5rem 0;",itemContainer.appendChild(note),charData[prop].forEach(((item,i)=>{const itemDiv=document.createElement("div");itemDiv.className="json-item",itemDiv.style.display="flex",itemDiv.style.gap="1rem",itemDiv.style.alignItems="center";const slotLabel=document.createElement("span");slotLabel.textContent=`Slot ${i+1}:`,slotLabel.style.fontWeight="bold",slotLabel.style.minWidth="60px",itemDiv.appendChild(slotLabel);const itemName=document.createElement("span");itemName.style.fontStyle="italic",itemName.style.color="var(--pico-muted-color)",itemName.style.minWidth="150px";const itemId=item.item_no||0,useCnt=item.use_cnt||0,getItemName=(id,cnt)=>16===cnt&&GameData&&GameData.OTHER_EQUIP_GEAR&&GameData.OTHER_EQUIP_GEAR[id]?GameData.OTHER_EQUIP_GEAR[id]:cnt<=9&&GameData&&GameData.ITEMS&&GameData.ITEMS[id]?GameData.ITEMS[id]:cnt>=100&&GameData&&GameData.FOOD&&GameData.FOOD[id]?GameData.FOOD[id]:`Item ${id}`;itemName.textContent=getItemName(itemId,useCnt),itemDiv.appendChild(itemName);const idInput=document.createElement("input");idInput.type="number",idInput.value=item.item_no,idInput.style.width="80px",idInput.style.marginBottom="0",idInput.addEventListener("input",(e=>{item.item_no=parseFloat(e.target.value);const newId=parseFloat(e.target.value);itemName.textContent=getItemName(newId,item.use_cnt)})),itemDiv.appendChild(idInput);const cntLabel=document.createElement("label");cntLabel.textContent="use_cnt",cntLabel.style.marginBottom="0",cntLabel.style.fontSize="0.85rem",itemDiv.appendChild(cntLabel);const cntInput=document.createElement("input");cntInput.type="number",cntInput.value=item.use_cnt,cntInput.style.width="60px",cntInput.style.marginBottom="0",cntInput.addEventListener("input",(e=>{item.use_cnt=parseFloat(e.target.value),itemName.textContent=getItemName(item.item_no,parseFloat(e.target.value))})),itemDiv.appendChild(cntInput),itemContainer.appendChild(itemDiv)})),void rightColumn.appendChild(itemContainer)}if("buki_mon"===prop){const weaponRuneDiv=document.createElement("div");weaponRuneDiv.className="json-item";const label=document.createElement("label");label.textContent="Weapon Rune",weaponRuneDiv.appendChild(label);const isBeast=GameData&&GameData.BEASTS&&GameData.BEASTS.includes(index),select=document.createElement("select");if(select.style.marginBottom="0",isBeast){const option=document.createElement("option");option.value=0,option.textContent="0: None (Beast/Monster - Cannot equip)",option.selected=!0,select.appendChild(option),select.disabled=!0,select.style.opacity="0.6",select.style.cursor="not-allowed",charData[prop]=0}else{[{id:0,name:"None"},{id:1,name:"Fire Orb"},{id:2,name:"Rage Orb"},{id:3,name:"Water Orb"},{id:4,name:"Flowing Orb"},{id:5,name:"Wind Orb"},{id:6,name:"Cyclone Orb"},{id:7,name:"Earth Orb"},{id:8,name:"Mother Earth Orb"},{id:9,name:"Lightning Orb"},{id:10,name:"Thunder Orb"},{id:94,name:"Hunter Orb"},{id:95,name:"Technique Orb"},{id:96,name:"Silence Orb"},{id:97,name:"Poison Orb"},{id:98,name:"Knockdown Orb"},{id:99,name:"Sleep Orb"},{id:100,name:"Friendship Orb"},{id:101,name:"Solitude Orb"},{id:102,name:"Kindness Orb"},{id:103,name:"Exertion Orb"}].forEach((rune=>{const option=document.createElement("option");option.value=rune.id,option.textContent=`${rune.id}: ${rune.name}`,charData[prop]===rune.id&&(option.selected=!0),select.appendChild(option)})),select.addEventListener("change",(e=>{charData[prop]=parseInt(e.target.value)}))}return weaponRuneDiv.appendChild(select),void weaponContainer.appendChild(weaponRuneDiv)}{const displayLabel=Schema.labels[prop]||prop;return el=createElementForValue(charData[prop],displayLabel,(newValue=>{charData[prop]=newValue}),charData),void leftColumn.appendChild(el)}})),columnsContainer.appendChild(leftColumn),columnsContainer.appendChild(rightColumn),charDetails.appendChild(columnsContainer),container.appendChild(charDetails)}if(arr.length>84){const note=document.createElement("p");note.textContent=`Note: Showing only first 84 playable characters. ${arr.length-84} non-playable characters hidden.`,note.style.fontStyle="italic",note.style.color="var(--pico-muted-color)",container.appendChild(note)}return filterSelect.addEventListener("change",(e=>{const filterValue=e.target.value;container.querySelectorAll(".json-object").forEach((charDetail=>{if("all"===filterValue)charDetail.style.display="";else{let shouldShow=!1;"M"===filterValue&&"true"===charDetail.dataset.isMale&&(shouldShow=!0),"F"===filterValue&&"true"===charDetail.dataset.isFemale&&(shouldShow=!0),"K"===filterValue&&"true"===charDetail.dataset.isKobold&&(shouldShow=!0),"W"===filterValue&&"true"===charDetail.dataset.isWinger&&(shouldShow=!0),"Z"===filterValue&&"true"===charDetail.dataset.isMonster&&(shouldShow=!0),"N"===filterValue&&"true"===charDetail.dataset.isNoble&&(shouldShow=!0),charDetail.style.display=shouldShow?"":"none"}}))})),container}function createDataValuesViewer(container){if(container.innerHTML="",container.className="tab-content data-values-content","undefined"==typeof GameData)return void(container.innerHTML="<p>GameData not loaded.</p>");const intro=document.createElement("p");intro.style.cssText="margin-bottom: 1rem; color: var(--pico-muted-color);",intro.innerHTML="<strong>Reference Data:</strong> Item IDs, character names, and use_cnt classifications for the save file editor.",container.appendChild(intro);[{name:"CHARACTERS",data:GameData.CHARACTERS,info:"Character names by index (0-125)"},{name:"ITEMS",data:GameData.ITEMS,info:"Consumable items (use_cnt: 0-9)"},{name:"FARMING",data:GameData.FARMING,info:"Farm items (use_cnt: 48)"},{name:"TRADE",data:GameData.TRADE,info:"Trade goods (use_cnt: 64)"},{name:"BASE_ITEM",data:GameData.BASE_ITEM,info:"Warehouse items (use_cnt: 80)"},{name:"FOOD",data:GameData.FOOD,info:"Food recipes (use_cnt: 99+)"},{name:"RUNES",data:GameData.RUNES,info:"Rune orbs (use_cnt: 32)"},{name:"HELMET",data:GameData.HELMET,info:"Helmets (use_cnt: 16)"},{name:"ARMOR",data:GameData.ARMOR,info:"Armor (use_cnt: 16)"},{name:"SHIELD",data:GameData.SHIELD,info:"Shields (use_cnt: 16)"},{name:"OTHER_EQUIP_GEAR",data:GameData.OTHER_EQUIP_GEAR,info:"Accessories (use_cnt: 16)"}].forEach((category=>{if(!category.data)return;const details=document.createElement("details");details.className="json-object";const summary=document.createElement("summary");summary.innerHTML=`<strong>${category.name}</strong> - ${category.info}`,details.appendChild(summary);const listContainer=document.createElement("div");listContainer.className="data-values-list";Object.entries(category.data).forEach((([id,itemData])=>{const item=document.createElement("div");item.className="data-values-item";const idSpan=document.createElement("span");idSpan.className="id",idSpan.textContent=id+":";const nameSpan=document.createElement("span");if(nameSpan.className="name","object"==typeof itemData&&null!==itemData&&itemData.name){if(nameSpan.textContent=itemData.name,itemData.attrs&&itemData.attrs.length>0){const attrsSpan=document.createElement("span");attrsSpan.className="attrs",attrsSpan.style.cssText="margin-left: 0.5rem; font-size: 0.85rem; color: var(--pico-muted-color); font-style: italic;",attrsSpan.textContent=`[${itemData.attrs.join(", ")}]`,nameSpan.appendChild(attrsSpan)}}else nameSpan.textContent=itemData;item.appendChild(idSpan),item.appendChild(nameSpan),listContainer.appendChild(item)})),details.appendChild(listContainer),container.appendChild(details)}));const donateContainer=document.createElement("div");donateContainer.style.cssText="text-align: center; margin-top: 2rem; padding: 1.5rem; background: linear-gradient(135deg, #f5d020 0%, #f0b90b 100%); border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);";const donateText=document.createElement("p");donateText.style.cssText="margin: 0 0 1rem 0; font-size: 0.9rem; color: #000; font-weight: 600;",donateText.textContent="‚òï Enjoying this editor? Support development!",donateContainer.appendChild(donateText);const donateButton=document.createElement("a");donateButton.href="https://paypal.me/thefaospark?country.x=PH&locale.x=en_US",donateButton.target="_blank",donateButton.rel="noopener noreferrer",donateButton.textContent="üíõ Donate via PayPal",donateButton.style.cssText="display: inline-block; padding: 0.75rem 2rem; background: #000; color: #f5d020; text-decoration: none; border-radius: 6px; font-weight: 700; font-size: 1rem; transition: all 0.3s; box-shadow: 0 2px 4px rgba(0,0,0,0.2);",donateButton.addEventListener("mouseenter",(()=>{donateButton.style.transform="translateY(-2px)",donateButton.style.boxShadow="0 4px 8px rgba(0,0,0,0.3)"})),donateButton.addEventListener("mouseleave",(()=>{donateButton.style.transform="translateY(0)",donateButton.style.boxShadow="0 2px 4px rgba(0,0,0,0.2)"})),donateContainer.appendChild(donateButton),container.appendChild(donateContainer)}function markdownToHTML(markdown){let html=markdown;return html=html.replace(/```(\w+)?\n([\s\S]*?)```/g,((match,lang,code)=>`<pre><code class="language-${lang||"text"}">${code.trim()}</code></pre>`)),html=html.replace(/`([^`]+)`/g,"<code>$1</code>"),html=html.replace(/^#### (.*$)/gm,"<h4>$1</h4>"),html=html.replace(/^### (.*$)/gm,"<h3>$1</h3>"),html=html.replace(/^## (.*$)/gm,"<h2>$1</h2>"),html=html.replace(/^# (.*$)/gm,"<h1>$1</h1>"),html=html.replace(/\*\*\*(.+?)\*\*\*/g,"<strong><em>$1</em></strong>"),html=html.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),html=html.replace(/\*(.+?)\*/g,"<em>$1</em>"),html=html.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>'),html=html.replace(/^> \[!(\w+)\] (.+)$/gm,((match,type,content)=>`<div class="alert alert-${type.toLowerCase()}"><strong>${type}:</strong> ${content}</div>`)),html=html.replace(/^> \[!(\w+)\]\n((?:^> .*$\n?)*)/gm,((match,type,content)=>{const alertContent=content.replace(/^> /gm,"").trim();return`<div class="alert alert-${type.toLowerCase()}"><strong>${type}:</strong> ${alertContent}</div>`})),html=html.replace(/^> (.+)$/gm,"<blockquote>$1</blockquote>"),html=html.replace(/^---$/gm,"<hr>"),html=html.replace(/^(\s*)([-*+]|\d+\.)\s+/gm,"<br>$1$2 "),html=html.split("\n\n").map((para=>para.match(/^<(h[1-6]|ul|ol|pre|blockquote|hr|div)/)?para:""===para.trim()?"":`<p>${para.replace(/\n/g," ")}</p>`)).join("\n"),html}function createAboutViewer(container){container.innerHTML="",container.className="tab-content about-content";const loading=document.createElement("p");loading.textContent="Loading README...",loading.style.cssText="color: var(--pico-muted-color); text-align: center; padding: 2rem;",container.appendChild(loading),fetch("./README.md").then((response=>{if(!response.ok)throw new Error(`Failed to load README: ${response.statusText}`);return response.text()})).then((markdown=>{container.innerHTML="";const contentWrapper=document.createElement("div");contentWrapper.className="readme-content",contentWrapper.style.cssText="max-width: 800px; margin: 0 auto; padding: 1rem;";const htmlContent=markdownToHTML(markdown);contentWrapper.innerHTML=htmlContent;const style=document.createElement("style");style.textContent="\n        .readme-content h1 {\n          border-bottom: 2px solid var(--pico-primary);\n          padding-bottom: 0.5rem;\n          margin-top: 1.5rem;\n        }\n        .readme-content h2 {\n          border-bottom: 1px solid var(--pico-muted-border-color);\n          padding-bottom: 0.3rem;\n          margin-top: 1.5rem;\n        }\n        .readme-content h3 {\n          margin-top: 1.25rem;\n        }\n        .readme-content ul {\n          margin-left: 1.5rem;\n        }\n        .readme-content li {\n          margin-bottom: 0.5rem;\n        }\n        .readme-content code {\n          background: rgba(0,0,0,0.2);\n          padding: 0.2rem 0.4rem;\n          border-radius: 3px;\n          font-size: 0.9em;\n        }\n        .readme-content pre {\n          background: rgba(0,0,0,0.3);\n          padding: 1rem;\n          border-radius: 6px;\n          overflow-x: auto;\n        }\n        .readme-content pre code {\n          background: none;\n          padding: 0;\n        }\n        .readme-content blockquote {\n          border-left: 4px solid var(--pico-primary);\n          padding-left: 1rem;\n          margin-left: 0;\n          color: var(--pico-muted-color);\n          font-style: italic;\n        }\n        .readme-content a {\n          color: var(--pico-primary);\n          text-decoration: none;\n        }\n        .readme-content a:hover {\n          text-decoration: underline;\n        }\n        .readme-content hr {\n          border: none;\n          border-top: 1px solid var(--pico-muted-border-color);\n          margin: 2rem 0;\n        }\n        .alert {\n          padding: 1rem;\n          margin: 1rem 0;\n          border-radius: 6px;\n          border-left: 4px solid;\n        }\n        .alert-important {\n          background: rgba(138, 43, 226, 0.1);\n          border-color: #8a2be2;\n        }\n        .alert-note {\n          background: rgba(59, 130, 246, 0.1);\n          border-color: #3b82f6;\n        }\n        .alert-warning {\n          background: rgba(245, 158, 11, 0.1);\n          border-color: #f59e0b;\n        }\n      ",document.head.appendChild(style),container.appendChild(contentWrapper)})).catch((error=>{container.innerHTML="";const errorMsg=document.createElement("p");errorMsg.style.cssText="color: var(--pico-del-color); text-align: center; padding: 2rem;",errorMsg.textContent=`Error loading README: ${error.message}`,container.appendChild(errorMsg)}))}function createChangelogViewer(container){container.innerHTML='<p style="text-align: center; color: var(--pico-muted-color);">Loading Changelog...</p>',fetch("./CHANGELOG.md").then((response=>{if(!response.ok)throw new Error(`Failed to load CHANGELOG: ${response.statusText}`);return response.text()})).then((markdown=>{container.innerHTML="";const contentWrapper=document.createElement("div");contentWrapper.className="changelog-content",contentWrapper.style.cssText="max-width: 800px; margin: 0 auto; padding: 1rem;";const htmlContent=markdownToHTML(markdown);contentWrapper.innerHTML=htmlContent,container.appendChild(contentWrapper)})).catch((error=>{container.innerHTML="";const errorMsg=document.createElement("p");errorMsg.style.cssText="color: var(--pico-del-color); text-align: center; padding: 2rem;",errorMsg.textContent=`Error loading Changelog: ${error.message}`,container.appendChild(errorMsg)}))}function createElementForValue(value,key,updateCallback,parentObject){const type=Array.isArray(value)?"array":typeof value;if(null===value){const div=document.createElement("div");return div.className="json-item",div.innerHTML=`<span class="json-key">${key}:</span> <em>null</em>`,div}switch(type){case"string":case"number":case"boolean":return createPrimitiveInput(value,key,type,updateCallback);case"object":return createObjectEditor(value,key,updateCallback);case"array":return createArrayEditor(value,key,updateCallback);default:const div=document.createElement("div");return div.textContent=`Unknown type: ${type}`,div}}function createPrimitiveInput(value,key,type,updateCallback){const div=document.createElement("div");div.className="json-item ";const label=document.createElement("label");let input;return label.textContent=key,div.appendChild(label),"boolean"===type?(input=document.createElement("input"),input.type="checkbox",input.checked=value,input.addEventListener("change",(e=>{updateCallback(e.target.checked)})),div.appendChild(input)):(input=document.createElement("input"),input.type="number"===type?"number":"text",input.value=value,"number"===type&&(input.step="any"),input.addEventListener("input",(e=>{const val="number"===type?parseFloat(e.target.value):e.target.value;updateCallback(val)})),div.appendChild(input)),div}function createObjectEditor(obj,key,updateCallback){const details=document.createElement("details");details.open=!1,details.className="json-object";const summary=document.createElement("summary");return summary.textContent=key,details.appendChild(summary),Object.keys(obj).forEach((k=>{const el=createElementForValue(obj[k],k,(newValue=>{obj[k]=newValue}),obj);details.appendChild(el)})),details}function createArrayEditor(arr,key,updateCallback){const details=document.createElement("details");details.open=!1,details.className="json-array";const summary=document.createElement("summary");return summary.textContent=key+` [${arr.length}]`,details.appendChild(summary),arr.forEach(((item,index)=>{const el=createElementForValue(item,index,(newValue=>{arr[index]=newValue}),arr);details.appendChild(el)})),details}fileInput.addEventListener("click",(e=>{DEBUG_MODE&&(e.preventDefault(),console.log("File input clicked - exiting debug mode..."),DEBUG_MODE=!1,localStorage.setItem("debugMode","false"),updateStatusBar(),alert("üêõ Debug Mode DISABLED\n\nPage will refresh to exit debug mode. Then you can load your file."),location.reload())})),fileInput.addEventListener("change",(e=>{const file=e.target.files[0];if(!file)return;currentFileName=file.name;const reader=new FileReader;reader.onload=event=>{try{currentData=JSON.parse(event.target.result),renderEditor(editorContainer,currentData,(newData=>{currentData=newData})),saveBtn.disabled=!1,updateSaveFileIndicator()}catch(err){alert("Error parsing JSON: "+err.message)}},reader.readAsText(file)})),saveBtn.addEventListener("click",(()=>{if(!currentData)return;const blob=new Blob([JSON.stringify(currentData,null,2)],{type:"application/json"}),url=URL.createObjectURL(blob),a=document.createElement("a");a.href=url,a.download=currentFileName,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(url)})),document.addEventListener("keydown",(e=>{(e.ctrlKey||e.metaKey)&&"d"===e.key&&(e.preventDefault(),DEBUG_MODE=!DEBUG_MODE,localStorage.setItem("debugMode",DEBUG_MODE),updateStatusBar(),DEBUG_MODE?(console.log("Debug mode ENABLED - Loading debug file..."),fetch(DEBUG_FILE_PATH).then((response=>{if(!response.ok)throw new Error(`Failed to load debug file: ${response.statusText}`);return response.json()})).then((data=>{currentData=data,currentFileName="debug_save.json",renderEditor(editorContainer,currentData,(newData=>{currentData=newData})),saveBtn.disabled=!1,console.log("Debug mode: Auto-loaded save file from",DEBUG_FILE_PATH),alert("üêõ Debug Mode ENABLED\n\nDebug save file loaded from:\n"+DEBUG_FILE_PATH)})).catch((err=>{console.error("Debug mode: Failed to load debug file:",err),alert("Debug mode enabled but failed to load file from:\n./debug/save.json\n\nError: "+err.message),DEBUG_MODE=!1,localStorage.setItem("debugMode","false"),updateStatusBar()}))):(console.log("Debug mode DISABLED"),alert("üêõ Debug Mode DISABLED\n\nPage will refresh to return to normal mode."),location.reload()))})),document.addEventListener("DOMContentLoaded",(()=>{const versionElement=document.getElementById("app-version");versionElement&&(versionElement.textContent="v1.2.0");const headerDataValuesBtn=document.getElementById("tab-data-values"),headerAboutBtn=document.getElementById("tab-about"),headerChangelogBtn=document.getElementById("tab-changelog"),editorContainer=document.getElementById("editor-container");headerDataValuesBtn&&headerDataValuesBtn.addEventListener("click",(()=>{document.querySelectorAll(".tabs .tab-button").forEach((b=>b.classList.add("outline"))),headerAboutBtn&&headerAboutBtn.classList.add("outline"),headerChangelogBtn&&headerChangelogBtn.classList.add("outline"),headerDataValuesBtn.classList.remove("outline"),editorContainer.id="content-data-values",createDataValuesViewer(editorContainer)})),headerAboutBtn&&headerAboutBtn.addEventListener("click",(()=>{document.querySelectorAll(".tabs .tab-button").forEach((b=>b.classList.add("outline"))),headerDataValuesBtn&&headerDataValuesBtn.classList.add("outline"),headerChangelogBtn&&headerChangelogBtn.classList.add("outline"),headerAboutBtn.classList.remove("outline"),editorContainer.id="content-about",createAboutViewer(editorContainer)})),headerChangelogBtn&&headerChangelogBtn.addEventListener("click",(()=>{document.querySelectorAll(".tabs .tab-button").forEach((b=>b.classList.add("outline"))),headerDataValuesBtn&&headerDataValuesBtn.classList.add("outline"),headerAboutBtn&&headerAboutBtn.classList.add("outline"),headerChangelogBtn.classList.remove("outline"),editorContainer.id="content-changelog",createChangelogViewer(editorContainer)}))}));